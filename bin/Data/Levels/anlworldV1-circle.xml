<?xml version="1.0" encoding="UTF-8"?>
<AnlWorldModel>
	<ANL version="V1" />
	<!-- <Module type="Fractal"          name="earthxy"                   		fractaltype="FBM" basistype="GRADIENT" interptype="QUINTIC" octaves="3" frequency="0.8" /> -->
	<!-- <Module type="Sphere"           name="spherer"                           cx="0" cy="0" radius="5" /> -->
	<!-- <Module type="Sphere"           name="sphere"                           cx="earthxy" cy="earthxy" radius="spherer" /> -->
	
	<Module type="Radial"           name="radial" 							cx="0" cy="0" radius="5" screenshot="true" />
	<Module type="ScaleDomain"      name="radialshape"                 		source="radial" scalex="0.3" scaley="1" />
    <Module type="Cache"            name="ground_gradient"                  source="radialshape" screenshot="true" />

	<Module type="Fractal"          name="lowland_shape_fractal"            fractaltype="BILLOW" basistype="GRADIENT" interptype="QUINTIC" octaves="2" frequency="0.25" />
	<Module type="AutoCorrect"      name="lowland_autocorrect"              source="lowland_shape_fractal" low="0" high="1" />
	<Module type="ScaleOffset"      name="lowland_scale"                    source="lowland_autocorrect" scale="0.125" offset="-0.45" />
	<Module type="ScaleDomain"      name="lowland_y_scale"                  source="lowland_scale" scaley="0" />
	<Module type="TranslateDomain"  name="lowland_terrain"                  source="ground_gradient" ty="lowland_y_scale" />

	<Module type="Fractal"          name="highland_shape_fractal"           fractaltype="FBM" basistype="GRADIENT" interptype="QUINTIC" octaves="4" frequency="2" />
	<Module type="AutoCorrect"      name="highland_autocorrect"             source="highland_shape_fractal" low="-1" high="1" />
	<Module type="ScaleOffset"      name="highland_scale"                   source="highland_autocorrect" scale="0.25" offset="0" />
	<Module type="ScaleDomain"      name="highland_y_scale"                 source="highland_scale" scaley="0" />
	<Module type="TranslateDomain"  name="highland_terrain"                 source="ground_gradient" ty="highland_y_scale" />

	<Module type="Fractal"          name="mountain_shape_fractal"           fractaltype="RIDGEDMULTI" basistype="GRADIENT" interptype="QUINTIC" octaves="8" frequency="1" />
	<Module type="AutoCorrect"      name="mountain_autocorrect"             source="mountain_shape_fractal" low="-1" high="1" />
	<Module type="ScaleOffset"      name="mountain_scale"                   source="mountain_autocorrect" scale="0.45" offset="0.15" />
	<Module type="ScaleDomain"      name="mountain_y_scale"                 source="mountain_scale" scaley="0.25" />
	<Module type="TranslateDomain"  name="mountain_terrain"                 source="ground_gradient" ty="mountain_y_scale" />

	<Module type="Fractal"          name="terrain_type_fractal"             fractaltype="FBM" basistype="GRADIENT" interptype="QUINTIC" octaves="3" frequency="0.125" />
	<Module type="AutoCorrect"      name="terrain_autocorrect"              source="terrain_type_fractal" low="0" high="1" />
	<Module type="ScaleDomain"      name="terrain_type_y_scale"             source="terrain_autocorrect" scaley="0" />
	<Module type="Cache"            name="terrain_type_cache"               source="terrain_type_y_scale" />
	<Module type="Select"           name="highland_mountain_select"         low="highland_terrain" high="mountain_terrain" control="terrain_type_cache" threshold="0.55" falloff="0.2" />
	<Module type="Select"           name="highland_lowland_select"          low="lowland_terrain" high="highland_mountain_select" control="terrain_type_cache" threshold="0.25" falloff="0.15" />
	<Module type="CacheArray"       name="highland_lowland_select_cache"    source="highland_lowland_select" />
	<Module type="Select"           name="ground_select"                    low="0" high="1" control="highland_lowland_select_cache" threshold="0.2" />
	
	<Module type="Constant"			name="terrainaddvalue"   	   			value="0.61" />
	<Module type="Constant"			name="terrainmultvalue"   	   			value="4" />
	<Module type="Combiner"			name="terrainmapadd"   	   				operation="ADD" source="highland_lowland_select;terrainaddvalue" />
	<Module type="Combiner"		    name="terrainmapmult"         			operation="MULT" source="terrainmapadd;terrainmultvalue" />
	<Module type="Clamp"		    name="terrainmap"         				source="terrainmapmult" low="0" high="3" renderable="TerrainMap"  screenshot="true" />
		
    <Module type="CacheArray"       name="ground_cache"                		source="ground_select" renderable="GroundMap"  screenshot="true" />

	<Module type="Fractal"          name="cave_shape"                       fractaltype="RIDGEDMULTI" basistype="GRADIENT" interptype="QUINTIC" octaves="2" frequency="5" />
	<Module type="Bias"             name="cave_attenuate_bias"              source="highland_lowland_select_cache" bias="0.65" />
	<Module type="Combiner"         name="cave_shape_attenuate"             operation="MULT" source="cave_shape;cave_attenuate_bias" />
	<Module type="Fractal"          name="cave_perturb_fractal"             fractaltype="FBM" basistype="GRADIENT" interptype="CUBIC" octaves="3" frequency="5" />
	<Module type="ScaleOffset"      name="cave_perturb_scale"               source="cave_perturb_fractal" scale="1" offset="0" />
	<Module type="TranslateDomain"  name="cave_perturb"                     source="cave_shape_attenuate" tx="cave_perturb_scale" />
	<Module type="Select"           name="cave_select"                      low="1" high="0" control="cave_perturb" threshold="0.8" falloff="0" />
	
	<Module type="Combiner"         name="ground_cave_multiply"             operation="MULT" source="cave_select;ground_cache" renderable="CaveMap"  screenshot="true" />
</AnlWorldModel>
